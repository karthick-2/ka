(this["webpackJsonpburger-hub-frontend"]=this["webpackJsonpburger-hub-frontend"]||[]).push([[0],{39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(18),c=r(4),i=r(5),o=r(7),u=r(6),l=r(0),d=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={ourRestaurants:[],display:!1,title:"",url:""},e.displayList=function(){var t=e.state.display;e.setState({display:!t})},e.getTitle=function(t){var r=t.title,n=t.url;e.setState({title:r,url:n,display:!1})},e.goToRestaurant=function(){var t=e.state.url;e.props.history.push("/restaurant/".concat(t))},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"restaurant_select",children:[Object(l.jsxs)("div",{className:"restaurant_select_top",children:[Object(l.jsx)("div",{onClick:this.displayList,className:"restaurant_select_top-header font-effect-outline",children:this.state.title?this.state.title:"Choose a restaurant"}),Object(l.jsxs)("div",{className:"arrow_picker",children:[Object(l.jsx)("div",{className:"arrow_picker-up"}),Object(l.jsx)("div",{className:"arrow_picker-down"})]})]}),this.state.display?Object(l.jsx)("div",{className:"restaurant_select_bottom",children:Object(l.jsx)("ul",{children:this.state.ourRestaurants.map((function(t){return Object(l.jsx)("li",{onClick:function(){return e.getTitle(t)},children:t.title},t.id)}))})}):null,this.state.title&&!this.state.dispay?Object(l.jsx)("button",{onClick:this.goToRestaurant,children:" Go to the restaurant"}):null]})}},{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/api/v1/restaurants").then((function(e){return e.json()})).then((function(t){e.setState({ourRestaurants:t})}))}}]),r}(a.a.Component),j=r(12),h=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){e.props.addToOrder(e.props.index)},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this,t="available"===this.props.status;return Object(l.jsxs)("li",{className:"menu-burger",children:[Object(l.jsx)("div",{className:"image-container",children:Object(l.jsx)("img",{src:this.props.image,alt:this.props.name})}),Object(l.jsxs)("div",{className:"burger-details",children:[Object(l.jsxs)("h3",{className:"burger-name",children:[this.props.name,Object(l.jsxs)("span",{className:"price",children:["\ud83d\udcb2",this.props.price]})]}),Object(l.jsx)("p",{children:this.props.description}),Object(l.jsx)("button",{className:"buttonOrder",disabled:!t,onClick:function(){return e.props.addToOrder(e.props.index)},children:t?"+Add":"Temporary not available"})]})]})}}]),r}(a.a.Component),p=function(e){return Object(l.jsx)("header",{className:"top",children:Object(l.jsx)("div",{className:"wrap",children:Object(l.jsxs)("div",{className:"header-content>",children:[Object(l.jsxs)("div",{className:"header-rating",children:[Object(l.jsx)("div",{className:"header-rating_tag"}),Object(l.jsx)("div",{className:"header-rating_icon",children:"+++"})]}),Object(l.jsx)("div",{className:"header-divider",children:e.title}),Object(l.jsx)("h1",{className:"font-effect-fire-animation",children:"Burger Hub"}),Object(l.jsxs)("span",{children:["Best burger in",Object(l.jsx)("span",{className:"sub-header",children:"#Brooklyn"})]})]})})})},b=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderOrder=function(t){var r=e.props.burgers[t],n=e.props.order[t];return r&&"available"===r.status?Object(l.jsx)("li",{children:Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{children:n}),"item: ",r.name,Object(l.jsxs)("span",{children:["$",n*r.price]}),Object(l.jsx)("button",{onClick:function(){return e.props.deleteFromOrder(t)},className:"cancelItem",children:"\xd7"})]})},t):Object(l.jsxs)("li",{className:"unavalable",children:["Sorry, ",r?r.name:"burger"," temporary sold out"]},t)},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.order),r=t.reduce((function(t,r){var n=e.props.burgers[r],a=e.props.order[r];return n&&"available"===n.status?t+n.price*a:t}),0);return Object(l.jsxs)("div",{className:"order-wrap",children:[Object(l.jsx)("h2",{children:"Your Order"}),Object(l.jsx)("ul",{className:"order",children:t.map(this.renderOrder)}),Object(l.jsx)("div",{className:"total",children:Object(l.jsx)("div",{className:"total_wrap",children:Object(l.jsxs)("div",{className:"total_wrap-final",children:["Total: $ ",r]})})})]})}}]),r}(a.a.Component),O=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).nameRef=a.a.createRef(),e.priceRef=a.a.createRef(),e.statusRef=a.a.createRef(),e.descRef=a.a.createRef(),e.imageRef=a.a.createRef(),e.createBurger=function(t){t.preventDefault();var r={name:e.nameRef.current.value,price:parseFloat(e.priceRef.current.value||0),status:e.statusRef.current.value,description:e.descRef.current.value,image:e.imageRef.current.value};e.props.addBurger(r),t.currentTarget.reset()},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(l.jsxs)("form",{className:"burger-edit",onSubmit:this.createBurger,children:[Object(l.jsx)("input",{ref:this.nameRef,name:"name",type:"text",placeholder:"Name",autoComplete:"off"}),Object(l.jsx)("input",{ref:this.priceRef,name:"price",type:"text",placeholder:"Price",autoComplete:"off"}),Object(l.jsxs)("select",{ref:this.statusRef,name:"status",className:"status",children:[Object(l.jsx)("option",{value:"available",children:"Available"}),Object(l.jsx)("option",{value:"unavailable",children:"Delete From the Menu"})]}),Object(l.jsx)("textarea",{ref:this.descRef,name:"desc",placeholder:"Desc"}),Object(l.jsx)("input",{ref:this.imageRef,name:"image",type:"text",placeholder:"Image",autoComplete:"off"}),Object(l.jsx)("button",{type:"submit",children:"+ Add to Menu"})]})}}]),r}(a.a.Component),m=r(16),f=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){var r=Object(j.a)(Object(j.a)({},e.props.burger),{},Object(m.a)({},t.currentTarget.name,t.currentTarget.value));e.props.updateBurger(e.props.index,r)},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"burger-edit",children:[Object(l.jsx)("input",{onChange:this.handleChange,name:"name",type:"text",value:this.props.name}),Object(l.jsx)("input",{onChange:this.handleChange,name:"price",type:"text",value:this.props.price}),Object(l.jsxs)("select",{onChange:this.handleChange,name:"status",className:"status",value:this.props.status,children:[Object(l.jsx)("option",{value:"available",children:"Available"}),Object(l.jsx)("option",{value:"unavailable",children:"Sold out"})]}),Object(l.jsx)("textarea",{onChange:this.handleChange,name:"description",value:this.props.description}),Object(l.jsx)("input",{onChange:this.handleChange,name:"image",type:"text",value:this.props.image})]})}}]),r}(a.a.Component),g=r(13),v=function(e){return{type:"SET_CURRENT_USER",user:e}},x=Object(g.b)(null,{logout:function(){return function(e){return e({type:"CLEAR_CURRENT_USER"}),fetch("http://localhost:3000/api/v1/logout",{credentials:"include",method:"DELETE"})}}})((function(e){var t=e.logout;return Object(l.jsx)("form",{onSubmit:t,children:Object(l.jsx)("input",{className:"buttonLogout",type:"submit",value:"Log Out"})})})),y=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"menu-admin",children:[Object(l.jsxs)("div",{className:"login-header",children:[Object(l.jsx)("div",{className:"avatar",children:Object(l.jsx)("img",{src:"/images/panda1.jpg",alt:"avatar"})}),Object(l.jsx)(x,{})]}),Object(l.jsx)("h2",{children:"Menu Control"}),this.props.burgers.map((function(t){return Object(l.jsx)(f,{index:t.id,name:t.name,price:t.price,description:t.description,status:t.status,image:t.image,burger:t,updateBurger:e.props.updateBurger},t.id)})),Object(l.jsx)(O,{addBurger:this.props.addBurger})]})}}]),r}(a.a.Component),N={fetchBurgers:function(){return fetch("http://localhost:3000/api/v1/restaurants/1/burgers").then((function(e){return e.json()}))}},R={postBurger:function(e){var t={method:"POST",body:JSON.stringify({burger:e}),headers:{"Content-Type":"application/json"}};return fetch("http://localhost:3000/api/v1/restaurants/1/burgers",t).then((function(e){return e.json()}))}},C=Object(g.b)((function(e){return{loginFormData:e.loginForm}}),{updateLoginForm:function(e){return{type:"UPDATE_LOGIN_FORM",formData:e}},login:function(e){return console.log("credentials are",e),function(t){return fetch("http://localhost:3000/api/v1/login",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):t(v(e))})).catch(console.log)}}})((function(e){var t=e.loginFormData,r=e.updateLoginForm,n=e.login,a=e.history,s=function(e){var n=e.target,a=n.name,s=n.value,c=Object(j.a)(Object(j.a)({},t),{},Object(m.a)({},a,s));r(c)};return Object(l.jsx)("div",{className:"login-container",children:Object(l.jsx)("nav",{className:"login",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(t,a)},children:[Object(l.jsx)("h2",{children:"LOGIN"}),Object(l.jsx)("p",{children:"Enter you Username and Password"}),Object(l.jsx)("input",{placeholder:"username",value:t.username,name:"username",type:"text",onChange:s}),Object(l.jsx)("input",{placeholder:"password",value:t.password,name:"password",type:"text",onChange:s}),Object(l.jsx)("button",{className:"login",children:"Enter"})]})})})})),_=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.getCurrentUser()}},{key:"render",value:function(){return this.props.currentUser?Object(l.jsx)(x,{})&&this.props.children:Object(l.jsx)(C,{})}}]),r}(a.a.Component),T=Object(g.b)((function(e){return{currentUser:e.currentUser}}),{getCurrentUser:function(){return console.log("Dispatching get current user"),function(e){return fetch("http://localhost:3000/api/v1/get_current_user",{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):e(v(t))})).catch(console.log)}}})(_),E=function(e){Object(o.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={burgers:[],order:{}},e.addBurger=function(t){R.postBurger(t).then((function(t){return e.setState({burgers:e.state.burgers.concat(t)})}))},e.addToOrder=function(t){var r=Object(j.a)({},e.state.order);r[t]=r[t]+1||1,e.setState({order:r})},e.deleteFromOrder=function(t){var r=Object(j.a)({},e.state.order);delete r[t],e.setState({order:r})},e.updateBurger=function(t,r){var n=e.state.burgers.map((function(e){return e.id==r.id?r:e}));e.setState({burgers:n})},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;N.fetchBurgers().then((function(t){return e.setState({burgers:t})}))}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"burger-paradise",children:[Object(l.jsxs)("div",{className:"menu",children:[Object(l.jsx)(p,{title:"Hot Burgers"}),Object(l.jsx)("ul",{className:"burgers",children:this.state.burgers.map((function(t){return Object(l.jsx)(h,{index:t.id,name:t.name,price:t.price,description:t.description,status:t.status,image:t.image,addToOrder:e.addToOrder},t.id)}))})]}),Object(l.jsx)(b,{deleteFromOrder:this.deleteFromOrder,burgers:this.state.burgers,order:this.state.order}),Object(l.jsx)(T,{children:Object(l.jsx)(y,{addBurger:this.addBurger,burgers:this.state.burgers,updateBurger:this.updateBurger})})]})}}]),r}(a.a.Component),S=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h2",{children:"Life is not fun without BURGERs"})})},w=r(27),k=r(3),B=function(){return Object(l.jsx)(w.a,{children:Object(l.jsxs)(k.c,{children:[Object(l.jsx)(k.a,{exact:!0,path:"/",component:d}),Object(l.jsx)(k.a,{path:"/restaurant/:restaurantId",component:E}),Object(l.jsx)(k.a,{component:S})]})})},U=(r(39),r(14)),D={username:"",password:""},F=r(28),L=Object(U.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type,e},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.user;case"CLEAR_CURRENT_USER":return null;default:return e}},loginForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_LOGIN_FORM":return t.formData;case"RESET_LOGIN_FORM":return D;default:return e}}}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||U.d,M=Object(U.e)(L,A(Object(U.a)(F.a)));Object(s.render)(Object(l.jsx)(g.a,{store:M,children:Object(l.jsx)(B,{})}),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.67f2ff7e.chunk.js.map